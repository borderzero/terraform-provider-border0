---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "border0_socket Resource - terraform-provider-border0"
subcategory: ""
description: |-
  The socket resource allows you to create and manage a Border0 socket.
---

# border0_socket (Resource)

The socket resource allows you to create and manage a Border0 socket.

## Example Usage

```terraform
// create an HTTP socket with an HTTPS upstream and add few tags to the socket
// this socket will be linked to a connector that was created with terraform
resource "border0_socket" "example_http" {
  name          = "example-http"
  socket_type   = "http"
  connector_ids = [border0_connector.example.id] // link to a connector that was created with terraform

  http_configuration {
    upstream_url = "https://www.bbc.com"
    header {
      key    = "X-Custom-Header"
      values = ["custom-value", "another-value"]
    }
    header {
      key    = "X-Another-Header"
      values = ["yet-another-value"]
    }
  }

  tags = {
    "user"        = "Bilbo Baggins"
    "project"     = "The Hobbit"
    "region"      = "The Shire"
    "environment" = "dev"
  }
}

// create an SSH socket and link it to a connector that's not managed by terraform
resource "border0_socket" "example_ssh_password_auth" {
  name              = "example-ssh-password-auth"
  recording_enabled = true
  socket_type       = "ssh"
  connector_ids     = ["a7de4cc3-d977-4c4b-82e7-dedb6e7b74a1"] // replace with your connector ID

  ssh_configuration {
    hostname            = "127.0.0.1"
    port                = 22
    authentication_type = "username_and_password"
    username            = "some_user"
    password            = "from:file:/path/to/password/file"
  }
}

// create another SSH socket and link it to a connector that was created with terraform
resource "border0_socket" "example_ssh_border0_certificate_auth" {
  name              = "example-ssh-border0-certificate-auth"
  recording_enabled = true
  socket_type       = "ssh"
  connector_ids     = [border0_connector.example.id] // link to a connector that was created with terraform

  ssh_configuration {
    hostname            = "127.0.0.1"
    port                = 22
    authentication_type = "border0_certificate"
    username            = "some_user"
  }
}

// create a database socket and link it to a connector that was created with terraform
// this socket will be used to connect to an AWS RDS instance with IAM authentication
// https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.IAMDBAuth.html
resource "border0_socket" "example_aws_rds_with_iam_auth" {
  name              = "example-aws-rds-with-iam-auth"
  recording_enabled = true
  socket_type       = "database"
  connector_ids     = [border0_connector.example.id] // link to a connector that was created with terraform

  database_configuration {
    protocol            = "mysql"
    hostname            = "some-aws-rds-cluster.us-west-2.rds.amazonaws.com"
    port                = 3306
    service_type        = "aws_rds"
    authentication_type = "iam"
    rds_instance_region = "us-east-2"
    username            = "some_db_iam_user_name"
  }
}

// create an SSH socket and link it to a connector that was created with terraform
// this socket will be used to connect to an AWS EC2 instance with EC2 Instance Connect
// https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-connect-set-up.html
resource "border0_socket" "example_aws_ec2_instance_connect" {
  name              = "example-ec2-instance-connect"
  recording_enabled = true
  socket_type       = "ssh"
  connector_ids     = [border0_connector.example.id] // link to a connector that was created with terraform

  ssh_configuration {
    service_type        = "aws_ec2_instance_connect"
    hostname            = "10.0.0.101"
    port                = 22
    username_provider   = "defined"
    username            = "ubuntu"
    ec2_instance_id     = "i-00000000000000001"
    ec2_instance_region = "ap-southeast-2"
  }
}

// create an SSH socket and link it to a connector that was created with terraform
// this socket will be used to connect to an AWS ECS service with SSM Session Manager
// https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html
// https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html
resource "border0_socket" "example_connect_to_ecs_with_ssm" {
  name              = "example-connect-to-ecs-with-ssm"
  recording_enabled = true
  socket_type       = "ssh"
  connector_ids     = [border0_connector.example.id] // link to a connector that was created with terraform

  ssh_configuration {
    service_type       = "aws_ssm"
    ssm_target_type    = "ecs"
    ecs_cluster_region = "eu-west-1"
    ecs_cluster_name   = "some-ecs-cluster-name"
    ecs_service_name   = "some-ecs-service-name"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the socket. Must be unique within your Border0 organization. Socket name can have alphanumerics and hyphens, but it must start or end with alphanumeric.
- `socket_type` (String) The type of the socket. Valid values: `ssh`, `http`, `database`, `tls`, `vnc`, `rdp`, `subnet_router`, `exit_node`, `snowflake`, `elasticsearch`, `kubernetes`.

### Optional

- `connector_id` (String, Deprecated) The ID of the connector that the socket is attached to.
- `connector_ids` (Set of String) The ID(s) of the connector(s) that the socket is attached to.
- `database_configuration` (Block List) (see [below for nested schema](#nestedblock--database_configuration))
- `description` (String) The description of the socket.
- `elasticsearch_configuration` (Block List) (see [below for nested schema](#nestedblock--elasticsearch_configuration))
- `exit_node_configuration` (Block List) (see [below for nested schema](#nestedblock--exit_node_configuration))
- `http_configuration` (Block List) (see [below for nested schema](#nestedblock--http_configuration))
- `kubernetes_configuration` (Block List) (see [below for nested schema](#nestedblock--kubernetes_configuration))
- `rdp_configuration` (Block List) (see [below for nested schema](#nestedblock--rdp_configuration))
- `recording_enabled` (Boolean) Indicates if session recording is enabled for the socket.
- `snowflake_configuration` (Block List) (see [below for nested schema](#nestedblock--snowflake_configuration))
- `ssh_configuration` (Block List) (see [below for nested schema](#nestedblock--ssh_configuration))
- `subnet_router_configuration` (Block List) (see [below for nested schema](#nestedblock--subnet_router_configuration))
- `tags` (Map of String) The tags of the socket.
- `tls_configuration` (Block List) (see [below for nested schema](#nestedblock--tls_configuration))
- `upstream_type` (String) The upstream type of the socket.
- `vnc_configuration` (Block List) (see [below for nested schema](#nestedblock--vnc_configuration))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--database_configuration"></a>
### Nested Schema for `database_configuration`

Optional:

- `authentication_type` (String) The upstream authentication type. Valid values: `username_and_password`, `tls`, `iam`. Defaults to `username_and_password`.
- `aws_credentials` (Block List) The upstream service's AWS credentials. (see [below for nested schema](#nestedblock--database_configuration--aws_credentials))
- `azure_ad_auth` (Boolean) Indicates if Azure AD authentication is enabled. Only used when service type is `azure_sql`.
- `azure_ad_integrated` (Boolean) Indicates if Azure integrated authentication is enabled. Only used when service type is `azure_sql`.
- `ca_certificate` (String, Sensitive) The upstream CA certificate.
- `certificate` (String, Sensitive) The upstream certificate. Only used when authentication type is `tls`.
- `cloudsql_connector_enabled` (Boolean) Indicates if CloudSQL connector is enabled. Only used when service type is `gcp_cloud_sql`.
- `cloudsql_iam_auth` (Boolean) Indicates if GCP IAM authentication is enabled. Only used when service type is `gcp_cloud_sql`.
- `cloudsql_instance_id` (String) The upstream CloudSQL instance id. Only used when service type is `gcp_cloud_sql`.
- `cluster_region` (String) The upstream DocumentDB upstream database region. Only used when service type is `aws_documentdb`, and authentication type is `iam`.
- `gcp_credentials` (String, Sensitive) The upstream GCP credentials.
- `hostname` (String) The upstream database hostname.
- `kerberos_auth` (Boolean) Indicates if Kerberos authentication is enabled. Only used when service type is `azure_sql`.
- `password` (String, Sensitive) The upstream password. Used when authentication type is either `username_and_password` or `tls`.
- `port` (Number) The upstream database port number.
- `private_key` (String, Sensitive) The upstream private key. Only used when authentication type is `tls`.
- `protocol` (String) The upstream database protocol. Valid values: `mysql`, `postgres` or `cockroachdb`. Defaults to `mysql`.
- `rds_instance_region` (String) The upstream RDS database region. Only used when service type is `aws_rds`, and authentication type is `iam`.
- `service_type` (String) The upstream service type. Valid values: `standard`, `aws_rds`, `gcp_cloud_sql`, `azure_sql`. Defaults to `standard`.
- `sql_auth` (Boolean) Indicates if standard SQL authentication (username and password) is enabled. Only used when service type is `azure_sql`.
- `tls_auth` (Boolean) Indicates if TLS authentication is enabled. Only used when service type is `gcp_cloud_sql`.
- `username` (String, Sensitive) The upstream username. Used when authentication type is either `username_and_password` or `tls`.

<a id="nestedblock--database_configuration--aws_credentials"></a>
### Nested Schema for `database_configuration.aws_credentials`

Optional:

- `access_key_id` (String, Sensitive) The upstream AWS access key id.
- `profile` (String, Sensitive) The upstream AWS profile.
- `secret_access_key` (String, Sensitive) The upstream AWS secret access key.
- `session_token` (String, Sensitive) The upstream AWS session token.



<a id="nestedblock--elasticsearch_configuration"></a>
### Nested Schema for `elasticsearch_configuration`

Optional:

- `authentication_type` (String) The upstream authentication type. Valid values: `basic`.
- `hostname` (String) The upstream database hostname.
- `password` (String, Sensitive) The upstream password. Used when authentication type is either `username_and_password` or `tls`.
- `port` (Number) The upstream database port number.
- `protocol` (String) The upstream database protocol. Valid values: `http`, `https`.
- `service_type` (String) The upstream service type. Valid values: `standard`
- `username` (String, Sensitive) The upstream username. Used when authentication type is either `username_and_password` or `tls`.


<a id="nestedblock--exit_node_configuration"></a>
### Nested Schema for `exit_node_configuration`


<a id="nestedblock--http_configuration"></a>
### Nested Schema for `http_configuration`

Optional:

- `file_server_directory` (String) The upstream file server directory. Only used when service type is `connector_file_server`.
- `header` (Block Set) Custom HTTP headers forwarded to the upstream service. Each header has a key and a list of values. (see [below for nested schema](#nestedblock--http_configuration--header))
- `host_header` (String) The upstream host header. Only used when service type is `standard`, and it's different from the hostname in `upstream_url`.
- `service_type` (String) The upstream service type. Valid values: `standard`, `connector_file_server`. Defaults to `standard`.
- `upstream_url` (String) The upstream HTTP URL. Format: `http(s)://<hostname>:<port>`. Example: `https://example.com` or `http://another.example.com:8080`. Only used when service type is `standard`.

<a id="nestedblock--http_configuration--header"></a>
### Nested Schema for `http_configuration.header`

Required:

- `key` (String) HTTP header name
- `values` (List of String) List of values for the header. Multiple values are supported.



<a id="nestedblock--kubernetes_configuration"></a>
### Nested Schema for `kubernetes_configuration`

Optional:

- `aws_credentials` (Block List) The upstream service's AWS credentials. (see [below for nested schema](#nestedblock--kubernetes_configuration--aws_credentials))
- `certificate_authority` (String) The path to the certificate authority file. If not specified, it will use the certificate authority from the kubeconfig file.
- `certificate_authority_data` (String) The base64 encoded certificate authority data. If not specified, it will use the certificate authority data from the kubeconfig file.
- `client_certificate` (String) The path to the client certificate file. If not specified, it will use the client certificate from the kubeconfig file.
- `client_certificate_data` (String) The base64 encoded client certificate data. If not specified, it will use the client certificate data from the kubeconfig file.
- `client_key` (String, Sensitive) The path to the client key file. If not specified, it will use the client key from the kubeconfig file.
- `client_key_data` (String, Sensitive) The base64 encoded client key data. If not specified, it will use the client key data from the kubeconfig file.
- `context` (String) The Kubernetes context to use. If not specified, it will use the current context from the kubeconfig file.
- `eks_cluster_name` (String) The name of the AWS EKS cluster. Only used when service type is `aws_eks`.
- `eks_cluster_region` (String) The AWS region of the EKS cluster. Only used when service type is `aws_eks`.
- `kubeconfig_path` (String) The path to the kubeconfig file. Default it will use the system's kubeconfig file.
- `server` (String) The Kubernetes API server URL. If not specified, it will use the server URL from the kubeconfig file.
- `service_type` (String) The upstream service type. Valid values: `standard`, `aws_eks`. Defaults to `standard`.
- `token` (String, Sensitive) The Kubernetes API token. If not specified, it will use the token from the kubeconfig file.
- `token_file` (String) The path to the file containing the Kubernetes API token. If not specified, it will use the token from the kubeconfig file.

<a id="nestedblock--kubernetes_configuration--aws_credentials"></a>
### Nested Schema for `kubernetes_configuration.aws_credentials`

Optional:

- `access_key_id` (String, Sensitive) The upstream AWS access key id.
- `profile` (String, Sensitive) The upstream AWS profile.
- `secret_access_key` (String, Sensitive) The upstream AWS secret access key.
- `session_token` (String, Sensitive) The upstream AWS session token.



<a id="nestedblock--rdp_configuration"></a>
### Nested Schema for `rdp_configuration`

Optional:

- `hostname` (String) The upstream RDP hostname.
- `port` (Number) The upstream RDP port number.


<a id="nestedblock--snowflake_configuration"></a>
### Nested Schema for `snowflake_configuration`

Required:

- `account` (String) The upstream Snowflake account e.g. meusyiv-ytb02865.
- `password` (String, Sensitive) The upstream Snowflake password for the user.
- `username` (String) The upstream Snowflake username to use in the account.


<a id="nestedblock--ssh_configuration"></a>
### Nested Schema for `ssh_configuration`

Optional:

- `authentication_type` (String) The upstream authentication type for standard SSH service. Valid values: `username_and_password`, `border0_certificate`, `ssh_private_key`. Defaults to `border0_certificate`.
- `aws_credentials` (Block List) The upstream service's AWS credentials. (see [below for nested schema](#nestedblock--ssh_configuration--aws_credentials))
- `ec2_instance_id` (String) The upstream EC2 instance id. Used when service type is either `aws_ec2_instance_connect` or `aws_ssm`.
- `ec2_instance_region` (String) The upstream EC2 instance region. Used when service type is either `aws_ec2_instance_connect` or `aws_ssm` (SSM target type is `ec2`).
- `ecs_cluster_name` (String) The upstream ECS cluster name. Only used when service type is `aws_ssm`, and SSM target type is `ecs`.
- `ecs_cluster_region` (String) The upstream ECS cluster region. Only used when service type is `aws_ssm`, and SSM target type is `ecs`.
- `ecs_service_name` (String) The upstream ECS service name. Only used when service type is `aws_ssm`, and SSM target type is `ecs`.
- `hostname` (String) The upstream SSH hostname.
- `password` (String, Sensitive) The upstream password. Only used when authentication type is `username_and_password`.
- `port` (Number) The upstream SSH port number.
- `private_key` (String, Sensitive) The upstream private key. Only used when authentication type is `private_key`.
- `service_type` (String) The upstream service type. Valid values: `standard`, `aws_ec2_instance_connect`, `aws_ssm`. Defaults to `standard`.
- `ssm_target_type` (String) The upstream SSM target type. Valid values: `ec2`, `ecs`. Defaults to `ec2`. Only used when service type is `aws_ssm`.
- `username` (String, Sensitive) The upstream username.
- `username_provider` (String) The upstream username provider. Valid values: `defined`, `prompt_client`, `use_connector_user`. Defaults to `prompt_client`.

<a id="nestedblock--ssh_configuration--aws_credentials"></a>
### Nested Schema for `ssh_configuration.aws_credentials`

Optional:

- `access_key_id` (String, Sensitive) The upstream AWS access key id.
- `profile` (String, Sensitive) The upstream AWS profile.
- `secret_access_key` (String, Sensitive) The upstream AWS secret access key.
- `session_token` (String, Sensitive) The upstream AWS session token.



<a id="nestedblock--subnet_router_configuration"></a>
### Nested Schema for `subnet_router_configuration`

Optional:

- `ipv4_cidr_ranges` (Set of String) Set of IPv4 routes to advertise to VPN clients in CIDR notation
- `ipv6_cidr_ranges` (Set of String) Set of IPv6 routes to advertise to VPN clients in CIDR notation


<a id="nestedblock--tls_configuration"></a>
### Nested Schema for `tls_configuration`

Optional:

- `hostname` (String) The upstream TLS hostname.
- `port` (Number) The upstream TLS port number.
- `service_type` (String) The upstream service type. Valid values: `standard`. Defaults to `standard`.


<a id="nestedblock--vnc_configuration"></a>
### Nested Schema for `vnc_configuration`

Optional:

- `hostname` (String) The upstream VNC hostname.
- `port` (Number) The upstream VNC port number.
